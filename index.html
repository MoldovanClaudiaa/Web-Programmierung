<html>
<head>
    <title>Firebase_form</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="box">
    <h2>Login Form</h2>
    <form>
        <div class="inputbox">
            <input type="text" value="" id="username" required>
            <label>username</label>
        </div>
        <div class="inputbox">
            <input type="text" value="" id="email" required>
            <label>email</label>
        </div>
        <div>
            <input type="text" value="" id="password" required>
            <label>password</label>
        </div>
        <input type="submit" value="submit" class="sub" id="submit">
    </form>
</div>
<script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js";
    import { getDatabase, ref, set, get, child } from "https://www.gstatic.com/firebasejs/10.10.0/firebase-database.js";
    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    const firebaseConfig = {
        apiKey: "AIzaSyDTMQqdCR2ix7NSbrkbLWT4v4afqDgrRRo",
        authDomain: "loginapp-1a8aa.firebaseapp.com",
        databaseURL: "https://loginapp-1a8aa-default-rtdb.europe-west1.firebasedatabase.app",
        projectId: "loginapp-1a8aa",
        storageBucket: "loginapp-1a8aa.appspot.com",
        messagingSenderId: "506257337801",
        appId: "1:506257337801:web:475c26e3bb98f47fc98c18"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);

    // get ref to database services
    const db = getDatabase(app);

    document.getElementById("submit").addEventListener('click', function(e) {
        e.preventDefault();
        set(ref(db, 'user/' + document.getElementById("username").value),
            {
                username: document.getElementById("username").value,
                email: document.getElementById("email").value,
                password: document.getElementById("password").value
            });
        alert("Login sucessfull!");
    })

    document.getElementById("submit").addEventListener('click', function(e) {
        e.preventDefault(); // Prevent the default form submission
        set(ref(db, 'user/' + document.getElementById("username").value), {
            username: document.getElementById("username").value,
            email: document.getElementById("email").value,
            password: document.getElementById("password").value
        }).then(() => {
            // Data saved successfully, redirect to quiz selection page
            window.location.href = 'something.html';
        }).catch((error) => {
            // Handle any errors here
            console.error("Error saving data: ", error);
            alert("Failed to save data.");
        });
    });


</script>
</body>
</html>
